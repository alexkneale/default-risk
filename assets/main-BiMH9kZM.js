import"./style-DJbxoDRT.js";function F(a,n,l,s,c,t){let e=0,r=!1;function i(){if(r){if(a.textContent=n.substring(0,e-1),e--,e===0&&(r=!1,typeof t=="function")){setTimeout(t,700);return}}else if(a.textContent=n.substring(0,e+1),e++,e===n.length){r=!0,setTimeout(i,s);return}setTimeout(i,r?c:l)}i()}window.addEventListener("DOMContentLoaded",()=>{const a=document.getElementById("animation");function n(){F(a,"Banking Algorithms, Uncovered.",100,1500,50,n)}n();const l=document.getElementById("mortgage-form");document.getElementById("show-form-btn").addEventListener("click",()=>{const s=document.getElementById("form-container");s.style.display="block";const c=document.getElementById("start-form");c.style.display="none",fetch("https://default-risk.onrender.com/",{method:"GET"}).then(()=>console.log("Server woken up!")).catch(t=>console.warn("Server wake-up failed:",t))}),l.addEventListener("submit",s=>{s.preventDefault();const c=new FormData(l),t={};c.forEach((o,S)=>{t[S]=o.toString()}),console.log("Form values:",t);const e=parseInt(t.units),r=t.prop_type,i=t.metro,g=parseInt(t["people-responsible"]),h=parseFloat(t["credit-score"]),y=t["first-property"],_=t["property-purpose"],p=parseFloat(t.income),b=parseFloat(t.debt),u=p?b/p*100:0;if(u>100){alert("Your monthly debt cannot be greater than your monthly income.");return}const d=parseFloat(t.prop_value),m=parseFloat(t["new-mortgage-value"]),f=d?m/d*100:0;if(f>100){alert("Requested loan size cannot exceed the property value.");return}const v=parseFloat(t["int-rt"]),w=parseInt(t.length),I=parseInt(t.insurance),E={fico:h,flag_fthb:y,mi_pct:I,cnt_units:e,occpy_sts:_,cltv:f,dti:u,orig_upb:m,int_rt:v,prop_type:r,loan_purpose:t["mortgage-purpose"],orig_loan_term:w,cnt_borr:g,metro:i==="True"};fetch("https://default-risk.onrender.com/predict",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)}).then(o=>o.json()).then(o=>{sessionStorage.setItem("userInputs",JSON.stringify(t)),console.log("Prediction:",o.default_prediction),o.default_prediction===1?window.location.href="fail.html":window.location.href="pass.html"}).catch(o=>{console.error("Error calling prediction API:",o)})})});
