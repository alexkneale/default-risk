(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const o of e.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function i(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function r(t){if(t.ep)return;t.ep=!0;const e=i(t);fetch(t.href,e)}})();function F(a,n,i,r,t,e){let o=0,c=!1;function l(){if(c){if(a.textContent=n.substring(0,o-1),o--,o===0&&(c=!1,typeof e=="function")){setTimeout(e,700);return}}else if(a.textContent=n.substring(0,o+1),o++,o===n.length){c=!0,setTimeout(l,r);return}setTimeout(l,c?t:i)}l()}window.addEventListener("DOMContentLoaded",()=>{const a=document.getElementById("animation");function n(){F(a,"Banking Algorithms, Uncovered.",100,1500,50,n)}n();const i=document.getElementById("mortgage-form");document.getElementById("show-form-btn").addEventListener("click",()=>{const r=document.getElementById("form-container");r.style.display="block";const t=document.getElementById("start-form");t.style.display="none"}),i.addEventListener("submit",r=>{r.preventDefault();const t=new FormData(i),e={};t.forEach((s,O)=>{e[O]=s.toString()}),console.log("Form values:",e);const o=parseInt(e.units),c=e.prop_type,l=e.metro,g=parseInt(e["people-responsible"]),y=parseFloat(e["credit-score"]),h=e["first-property"],b=e["property-purpose"],u=parseFloat(e.income),_=parseFloat(e.debt),p=u?_/u*100:0;if(p>100){alert("Your monthly debt cannot be greater than your monthly income.");return}const d=parseFloat(e.prop_value),f=parseFloat(e["new-mortgage-value"]),m=d?f/d*100:0;if(m>100){alert("Requested loan size cannot exceed the property value.");return}const v=parseFloat(e["int-rt"]),I=parseInt(e.length),E=parseInt(e.insurance),w={fico:y,flag_fthb:h,mi_pct:E,cnt_units:o,occpy_sts:b,cltv:m,dti:p,orig_upb:f,int_rt:v,prop_type:c,loan_purpose:e["mortgage-purpose"],orig_loan_term:I,cnt_borr:g,metro:l==="True"};fetch("https://default-risk.onrender.com/predict",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)}).then(s=>s.json()).then(s=>{sessionStorage.setItem("userInputs",JSON.stringify(e)),console.log("Prediction:",s.default_prediction),s.default_prediction===1?window.location.href="fail.html":window.location.href="pass.html"}).catch(s=>{console.error("Error calling prediction API:",s)})})});
