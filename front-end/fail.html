<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Mortgage at Risk of Defaulting</title>
        <link
            href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap"
            rel="stylesheet"
        />
    </head>
    <body>
        <header class="hdr">
            <div class="hdr__content">
                <div class="hdr__writing">
                    <h2 class="hdr__writing--large">
                        Your mortgage request was flagged as risky.
                    </h2>
                    <h3 class="hdr__writing">Scroll down to find out why.</h3>
                </div>
            </div>
        </header>

        <main>
            <section class="score">
                <h2>Looking at your answers</h2>
                From analysing our data and algorithm, we've found that
                <strong>Credit Score</strong>,
                <strong>Requested Mortgage Size</strong> and
                <strong>Debt to Income ratio</strong> (monthly debt payments
                divided by monthly income) are the most important factors for
                determining default risk. Below, we have shown you how your
                responses to these three factors compared with the those in our
                dataset, to help give you some idea as to why your mortgage
                request was rejected.
                <div class="fico-graph">
                    <h4>Your Credit Score vs Rest of Consumer Population</h4>
                    <canvas id="ficoChart" class="bar-graphs"></canvas>
                </div>

                <div class="orig-upb-graph">
                    <h4>
                        Your Requested Mortgage Size vs Rest of Consumer
                        Population
                    </h4>
                    <canvas id="orig_upbChart" class="bar-graphs"></canvas>
                </div>

                <div class="dti-graph">
                    <h4>
                        Your Debt to Income Ratio vs Rest of Consumer Population
                    </h4>
                    <canvas id="dtiChart" class="bar-graphs"></canvas>
                </div>
            </section>

            <section class="algorithm-pass">
                <h2>Our Algorithm</h2>
                <div class="algorithm-block">
                    <div class="algorithm__writing">
                        How common is defaulting on a mortgage? Not common at
                        all. In fact, according to our dataset, only
                        <strong>2.2%</strong> of mortgages default (see pie
                        chart). However, defaulting is very expensive for banks
                        when it does happen. So best avoided.
                        <br />
                        <br />

                        Our goal is to build an algorithm that identifies which
                        mortgages are likely to default. The challenge is that
                        defaulters often look very similar to non-defaulters in
                        the data — making 100% accuracy nearly impossible.
                        <br />
                        <br />

                        Instead, we aim to detect <strong>some</strong> risky
                        cases — even if that means occasionally misclassifying
                        safe ones. This leads to a trade-off: catching real
                        risks while minimizing false alarms.

                        <br />
                        <br />
                    </div>
                    <div class="pie pie__default--container">
                        <h4>How common is defaulting?</h4>
                        <canvas
                            id="pieDefault"
                            class="pie__default--chart"
                            max-width="500px"
                            max-height="400px"
                        ></canvas>
                    </div>
                </div>

                <div class="algorithm-block">
                    <div class="algorithm__writing">
                        We chose a <strong>conservative approach</strong>: one
                        that catches as many risky mortgages as possible, even
                        if it flags some safe ones by mistake.
                        <br />
                        <br />

                        Our algorithm correctly identifies
                        <strong>68% of all defaults</strong> — that`s
                        <strong>1.5%</strong> of all mortgages. However, it
                        <strong>misses 32%</strong> of defaults (<strong
                            >0.7%</strong
                        >
                        of all mortgages), which slip through.
                        <br />
                        <br />

                        More importantly, it
                        <strong>misclassifies 25% of all mortgages</strong> as
                        risky when they`re actually safe. That means if your
                        mortgage is flagged as risky, there's only a
                        <strong>5.7% chance it would actually default</strong>.
                        <br />
                        <br />

                        Despite this, we found the algorithm
                        <strong>saves money overall</strong>, by helping avoid
                        enough risky loans to offset the missed opportunities.
                        It`s a win for the bank — though not always for the
                        consumer.
                        <br />
                        <br />

                        To help you explore this trade-off, we’ve made the
                        algorithm interactive: try the form below as many times
                        as you`d like and see how it responds.
                    </div>
                    <div class="pie pie__algorith--container">
                        <h4>Results of our algorithm</h4>
                        <canvas
                            id="pieAlgorithm"
                            class="pie__algorithm--chart"
                            max-width="500px"
                            max-height="400px"
                        ></canvas>
                    </div>
                </div>
            </section>

            <form id="mortgage-form">
                <section id="form" class="form">
                    <!-- //// property questions 
                      // - What is the value of property? (towards cltv)
                      // - how many units is it (cnt_units)
                      // - what is the type of property? (prop_type)
                      // - is the property in an urban area? (metro)
                      // - What is total value of mortgages you already have (USD) (towards cltv)

                      
                      //// personal questions
                      // are you getting the mortgage by yourself or with other people?  (cnt_borr)
                      // what is your (or combined, if with other people) credit score (fico)
                      // have you (or any of you) previously bought property, or is this your first? (flag_fthb)
                      // what is the main purpose of the property? (occpy_sts)
                      // what is your (combined) monthly income? (towards dti)
                      // what are your (combined) current monthly debt payments? (towards dti)

                      //// loan questions
                      // What best describes your reason
                      for requesting a mortgage (loan_purpose, new mortgage or not) 
                      // then if old mortgage, these extra questions 
                      // how much money do you want (towards cltv)
                      // desired interest rate (int_rt)
                      // desired length of loan (orig_loan_term)
                      // how much mortgage insurance would you get? If none, input 0 (mi_pct) -->

                    <h2 id="form-message">
                        This mortgage request has been flagged as risky ⚠️
                    </h2>
                    <div class="form__container form__container--property">
                        <h3 class="form__title form__title--property">
                            Property Questions
                        </h3>
                        <div class="form__question form__question--prop-value">
                            <label for="prop_value">Property Value (USD)</label>
                            <input
                                type="number"
                                name="prop_value"
                                required
                            /><br /><br />
                        </div>
                        <div class="form__question form__question--units">
                            <label for="units"
                                >Number of Units of Property</label
                            >
                            <select name="units" required>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4+</option>
                            </select>
                        </div>
                        <div class="form__question form__question--proptype">
                            <label for="prop_type">Property Type</label>

                            <select name="prop_type" required>
                                <option value="SF">Single-Family Home</option>
                                <option value="CO">Condominium</option>
                                <option value="PU">
                                    Planned Unit Development (PUD)
                                </option>
                                <option value="MH">Manufactured Home</option>
                            </select>
                        </div>
                        <div class="form__question form__question--metro">
                            <label for="metro">In an urban area</label>

                            <select name="metro" required>
                                <option value="True">Yes</option>
                                <option value="False">No</option>
                            </select>
                        </div>
                    </div>
                    <div class="form__container form__container--personal">
                        <h3 class="form__title form__title--personal">
                            Personal Questions
                        </h3>
                        <div class="form__question form__question--proptype">
                            <label for="people-responsible"
                                >Number of people who will be responsible for
                                mortgage</label
                            >

                            <select name="people-responsible" required>
                                <option value="1">1</option>
                                <option value="2">More than 1</option>
                            </select>
                        </div>
                        <div
                            class="form__question form__question--credit-score"
                        >
                            <label for="credit-score"
                                >Credit Score
                                <span class="tooltip">
                                    ❓
                                    <span class="tooltip__text">
                                        Credit Score ranges from 300 to 850. You
                                        may have to convert your credit score if
                                        your current bank calculates credit
                                        score differently.
                                    </span>
                                </span></label
                            >
                            <input
                                type="number"
                                name="credit-score"
                                min="300"
                                max="850"
                                required
                            /><br /><br />
                        </div>

                        <div
                            class="form__question form__question--first-property"
                        >
                            <label for="first-property"
                                >Ever bought a property before?</label
                            >

                            <select name="first-property" required>
                                <option value="N">Yes</option>
                                <option value="Y">No</option>
                            </select>
                        </div>

                        <div
                            class="form__question form__question--property-purpose"
                        >
                            <label for="property-purpose"
                                >Purpose of the property</label
                            >

                            <select name="property-purpose" required>
                                <option value="P">
                                    My primary home, which I will occupy
                                    fulltime
                                </option>
                                <option value="S">My second home</option>
                                <option value="I">
                                    An investment property, which I don't plan
                                    on living in.
                                </option>
                            </select>
                        </div>

                        <div
                            class="form__question form__question--monthly-income"
                        >
                            <label for="income">Monthly income (USD)</label>
                            <input
                                type="number"
                                name="income"
                                required
                            /><br /><br />
                        </div>

                        <div
                            class="form__question form__question--monthly-debt"
                        >
                            <label for="debt"
                                >Monthly debt payments (USD)</label
                            >
                            <input
                                type="number"
                                name="debt"
                                required
                            /><br /><br />
                        </div>
                    </div>

                    <div class="form__container form__container--loan">
                        <h3 class="form__title form__title--loan">
                            Mortgage Specific Questions
                        </h3>

                        <div
                            class="form__question form__question--mortgage-purpose"
                        >
                            <label for="mortgage-purpose"
                                >Purpose of mortgage</label
                            >

                            <select name="mortgage-purpose">
                                <option value="P">
                                    First mortgage to purchase a property
                                </option>
                                <option value="C">
                                    Replacing existing mortgage, cash-out
                                    refinance
                                </option>
                                <option value="N">
                                    Replacing existing mortgage, no cash-out
                                    refinance
                                </option>
                            </select>
                        </div>

                        <div
                            class="form__question form__question--new-mortgage-value"
                        >
                            <label for="new-mortgage-value"
                                >Requested mortgage size (USD)
                            </label>
                            <input
                                type="number"
                                name="new-mortgage-value"
                            /><br /><br />
                        </div>

                        <div class="form__question form__question--int-rt">
                            <label for="int-rt"
                                >Desired interest rate (%)
                            </label>
                            <input
                                type="number"
                                min="0"
                                max="10"
                                name="int-rt"
                            /><br /><br />
                        </div>

                        <div class="form__question form__question--length">
                            <label for="length"
                                >Desired length of Mortgage (months)
                            </label>
                            <input type="number" name="length" /><br /><br />
                        </div>

                        <div class="form__question form__question--insurance">
                            <label for="insurance"
                                >Amount of mortgage insurance, as percentage of
                                mortgage value (0 if none)
                            </label>
                            <input
                                type="number"
                                min="0"
                                ,
                                max="100"
                                ,
                                name="insurance"
                            /><br /><br />
                        </div>
                    </div>
                </section>
                <button type="submit">Submit</button>
            </form>
        </main>
        <footer class="contact" id="contact">
            <h2>Contact the project creator!</h2>
            <ul class="contact__list">
                <li>
                    <a
                        href="https://github.com/alexkneale/"
                        target="_blank"
                        class="contact__btn contact__btn--1"
                    >
                        <svg
                            width="24"
                            height="24"
                            viewBox="0 0 24 24"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <path
                                d="M12 .3A11.7 11.7 0 000 12.2a11.7 11.7 0 008.2 11.2c.6.1.8-.2.8-.5v-1.9c-3.3.7-4-1.6-4-1.6-.5-1.2-1.1-1.5-1.1-1.5-.9-.6.1-.6.1-.6 1 .1 1.5 1.1 1.5 1.1.9 1.5 2.3 1.1 2.9.8.1-.6.4-1.1.7-1.4-2.7-.3-5.5-1.4-5.5-6.1 0-1.3.5-2.3 1.1-3.2 0-.3-.5-1.4.1-2.9 0 0 .9-.3 3.1 1.2a10.9 10.9 0 015.7 0c2.2-1.5 3.1-1.2 3.1-1.2.6 1.5.1 2.6.1 2.9.7.9 1.1 1.9 1.1 3.2 0 4.7-2.8 5.8-5.5 6.1.4.3.7.9.7 1.9v2.8c0 .3.2.6.8.5A11.7 11.7 0 0024 12.2 11.7 11.7 0 0012 .3z"
                            />
                        </svg>
                    </a>
                </li>
                <li>
                    <a
                        href="https://www.linkedin.com/in/alex-kneale-995b4025b/"
                        target="_blank"
                        class="contact__btn contact__btn--2"
                    >
                        <svg
                            width="24"
                            height="24"
                            viewBox="0 0 24 24"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <path
                                d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"
                            />
                        </svg>
                    </a>
                </li>
                <li>
                    <a
                        href="./files/CV_may_2025.pdf"
                        class="contact__btn contact__btn--3"
                        download
                    >
                        <svg
                            width="24"
                            height="24"
                            viewBox="0 0 24 24"
                            xmlns="http://www.w3.org/2000/svg"
                            fill-rule="evenodd"
                            clip-rule="evenodd"
                        >
                            <path
                                d="M3 24h19v-23h-1v22h-18v1zm17-24h-18v22h18v-22zm-1 1h-16v20h16v-20zm-2 16h-12v1h12v-1zm0-3h-12v1h12v-1zm0-3h-12v1h12v-1zm-7.348-3.863l.948.3c-.145.529-.387.922-.725 1.178-.338.257-.767.385-1.287.385-.643 0-1.171-.22-1.585-.659-.414-.439-.621-1.04-.621-1.802 0-.806.208-1.432.624-1.878.416-.446.963-.669 1.642-.669.592 0 1.073.175 1.443.525.221.207.386.505.496.892l-.968.231c-.057-.251-.177-.449-.358-.594-.182-.146-.403-.218-.663-.218-.359 0-.65.129-.874.386-.223.258-.335.675-.335 1.252 0 .613.11 1.049.331 1.308.22.26.506.39.858.39.26 0 .484-.082.671-.248.187-.165.322-.425.403-.779zm3.023 1.78l-1.731-4.842h1.06l1.226 3.584 1.186-3.584h1.037l-1.734 4.842h-1.044z"
                            />
                        </svg>
                    </a>
                </li>
            </ul>
            <p class="contact__email">alexanderkneale109@gmail.com</p>
        </footer>
    </body>
    <script type="module" src="./src/fail.ts"></script>
</html>
